<!doctype html><html>
<head>
<title>
Hubs - Tucson Mesh Docs
</title><meta name=viewport content="width=device-width,initial-scale=1">
<link href=../../css/main.css rel=stylesheet>
<meta property="og:title" content="Hubs - Tucson Mesh Docs">
<meta property="og:type" content="article">
<meta property="article:published_time" content="0001-01-01">
<meta property="og:description" content>
<meta property="og:url" content="https://mackncheesiest.github.io/tucsonmesh-docs/networking/hubs/">
<meta property="og:site_name" content="Tucson Mesh Docs">
<meta property="twitter:description" content>
<meta property="twitter:title" content="Hubs - Tucson Mesh Docs">
</head><body class=sans-serif>
<div class="h-100 flex-ns">
<div id=sidebar class="relative ph4-l ph3 flex justify-end-ns br bg-near-white b--light-gray">
<div class="mw5 w-100 overflow-y-hidden flex flex-column">
<div class="nowrap flex items-center justify-start h3">
<a href=../../ title=Home class="f3-ns f4 fw7 black nowrap flex items-center">
<img src=../../img/logo.svg class="h2 mr2">
<span class=f4>NYC Mesh
<span class="ml1 blue f5 ttu">Docs</span></span>
</a>
</div><div role=button class="hideDropdown h3 w3 flex items-center justify-center" tabindex=0><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-x"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg>
</div><div role=button class="showDropdown bg-near-white h3 w3 flex items-center justify-center" tabindex=0><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"><line x1="3" y1="12" x2="21" y2="12"/><line x1="3" y1="6" x2="21" y2="6"/><line x1="3" y1="18" x2="21" y2="18"/></svg>
</div><div class="dn db-ns dropdown overflow-y-auto pbv4-ns mt4-ns">
<ul class="list ma0 ph0">
<li>
<div class="flex items-center pv2"><svg xmlns="http://www.w3.org/2000/svg" width="10" height="16" viewBox="0 0 8 16" fill="#ccc" class="red mr2"><path fill-rule="evenodd" d="M7.5 8l-5 5L1 11.5 4.75 8 1 4.5 2.5 3z"/></svg>
<a href=../../tucsonmesh-docs/intro/ class="db black">Introduction</a>
</div></li><li>
<div class="flex items-center pv2"><svg xmlns="http://www.w3.org/2000/svg" width="10" height="16" viewBox="0 0 8 16" fill="#ccc" class="red mr2"><path fill-rule="evenodd" d="M7.5 8l-5 5L1 11.5 4.75 8 1 4.5 2.5 3z"/></svg>
<a href=../../tucsonmesh-docs/hardware/ class="db black">Hardware</a>
</div></li><li>
<div class="flex items-center pv2"><svg xmlns="http://www.w3.org/2000/svg" width="10" height="16" viewBox="0 0 8 16" fill="#ccc" class="red mr2"><path fill-rule="evenodd" d="M7.5 8l-5 5L1 11.5 4.75 8 1 4.5 2.5 3z"/></svg>
<a href=../../tucsonmesh-docs/firmware/ class="db black">Firmware</a>
</div></li><li>
<div class="flex items-center pv2"><svg xmlns="http://www.w3.org/2000/svg" width="10" height="16" viewBox="0 0 8 16" fill="#ccc" class="red mr2"><path fill-rule="evenodd" d="M7.5 8l-5 5L1 11.5 4.75 8 1 4.5 2.5 3z"/></svg>
<a href=../../tucsonmesh-docs/diy/ class="db black">DIY & Troubleshooting</a>
</div></li><li>
<div class="flex items-center pv2"><svg xmlns="http://www.w3.org/2000/svg" width="10" height="16" viewBox="0 0 8 16" fill="#ccc" class="red mr2"><path fill-rule="evenodd" d="M7.5 8l-5 5L1 11.5 4.75 8 1 4.5 2.5 3z"/></svg>
<a href=../../tucsonmesh-docs/glossary/ class="db black">Glossary</a>
</div></li><li>
<div class="flex items-center pv2"><svg xmlns="http://www.w3.org/2000/svg" width="10" height="16" viewBox="0 0 8 16" fill="#ccc" class="red mr2"><path fill-rule="evenodd" d="M7.5 8l-5 5L1 11.5 4.75 8 1 4.5 2.5 3z"/></svg>
<a href=../../tucsonmesh-docs/installs/ class="db black">Installs</a>
</div></li><li>
<div class="flex items-center pv2"><svg xmlns="http://www.w3.org/2000/svg" width="10" height="16" viewBox="0 0 10 16" fill="#ccc" class="red mr2"><path fill-rule="evenodd" d="M5 11 0 6l1.5-1.5L5 8.25 8.5 4.5 10 6z"/></svg>
<a href=../../tucsonmesh-docs/networking/ class="db black">Networking</a>
</div><ul class="ma0 pa0 ml3 pl2">
<a href=../../tucsonmesh-docs/networking/10-69-net-network/ class="db mv3 ml0 gray">
10-69-net Network
</a>
<a href=../../tucsonmesh-docs/networking/bgp/ class="db mv3 ml0 gray">
BGP
</a>
<a href=../../tucsonmesh-docs/networking/classes/ class="db mv3 ml0 gray">
Classes
</a>
<a href=../../tucsonmesh-docs/networking/dns/ class="db mv3 ml0 gray">
DNS
</a>
<a href=../../tucsonmesh-docs/networking/hubs/ class="db mv3 ml0 gray blue fw5">
Hubs
</a>
<a href=../../tucsonmesh-docs/networking/ipmappingidea/ class="db mv3 ml0 gray">
IP Mapping Idea
</a>
<a href=../../tucsonmesh-docs/networking/mesh/ class="db mv3 ml0 gray">
Mesh Design
</a>
<a href=../../tucsonmesh-docs/networking/ntp/ class="db mv3 ml0 gray">
NTP Network Time Protocol
</a>
<a href=../../tucsonmesh-docs/networking/ospf/ class="db mv3 ml0 gray">
OSPF
</a>
<a href=../../tucsonmesh-docs/networking/peering/ class="db mv3 ml0 gray">
Public ASN Peering
</a>
<a href=../../tucsonmesh-docs/networking/supernode-architecture/ class="db mv3 ml0 gray">
Supernode Architecture
</a>
<a href=../../tucsonmesh-docs/networking/vpn/ class="db mv3 ml0 gray">
VPN
</a>
<a href=../../tucsonmesh-docs/networking/vpnl2tpipsec/ class="db mv3 ml0 gray">
VPN - L2TP/IPsec
</a>
<a href=../../tucsonmesh-docs/networking/vpnl2tpipsecid/ class="db mv3 ml0 gray">
VPN - L2TP/IPsec Req.
</a>
<a href=../../tucsonmesh-docs/networking/vpnwireguard/ class="db mv3 ml0 gray">
VPN - WireGuard
</a>
<a href=../../tucsonmesh-docs/networking/vpnwireguardospf/ class="db mv3 ml0 gray">
VPN - WireGuard + OSPF
</a>
</ul></li><li>
<div class="flex items-center pv2"><svg xmlns="http://www.w3.org/2000/svg" width="10" height="16" viewBox="0 0 8 16" fill="#ccc" class="red mr2"><path fill-rule="evenodd" d="M7.5 8l-5 5L1 11.5 4.75 8 1 4.5 2.5 3z"/></svg>
<a href=../../tucsonmesh-docs/nodes/ class="db black">Nodes</a>
</div></li><li>
<div class="flex items-center pv2"><svg xmlns="http://www.w3.org/2000/svg" width="10" height="16" viewBox="0 0 8 16" fill="#ccc" class="red mr2"><path fill-rule="evenodd" d="M7.5 8l-5 5L1 11.5 4.75 8 1 4.5 2.5 3z"/></svg>
<a href=../../tucsonmesh-docs/organization/ class="db black">Organization</a>
</div></li><li>
<div class="flex items-center pv2"><svg xmlns="http://www.w3.org/2000/svg" width="10" height="16" viewBox="0 0 8 16" fill="#ccc" class="red mr2"><path fill-rule="evenodd" d="M7.5 8l-5 5L1 11.5 4.75 8 1 4.5 2.5 3z"/></svg>
<a href=../../tucsonmesh-docs/security/ class="db black">Security</a>
</div></li><li>
<div class="flex items-center pv2"><svg xmlns="http://www.w3.org/2000/svg" width="10" height="16" viewBox="0 0 8 16" fill="#ccc" class="red mr2"><path fill-rule="evenodd" d="M7.5 8l-5 5L1 11.5 4.75 8 1 4.5 2.5 3z"/></svg>
<a href=../../tucsonmesh-docs/services/ class="db black">Services</a>
</div></li><li>
<div class="flex items-center pv2"><svg xmlns="http://www.w3.org/2000/svg" width="10" height="16" viewBox="0 0 8 16" fill="#ccc" class="red mr2"><path fill-rule="evenodd" d="M7.5 8l-5 5L1 11.5 4.75 8 1 4.5 2.5 3z"/></svg>
<a href=../../tucsonmesh-docs/software/ class="db black">Software</a>
</div></li></ul></div></div></div><div class="overflow-y-scroll-ns w-80-ns">
<header class="dn ph4 h3 flex-ns flex-row items-center justify-start-l justify-center sans-serif bg-white">
<div class="w-100-ns f4 measure-wide flex items-center justify-end">
<nav class="f5 flex flex-wrap justify-center">
<a href=https://nycmesh.net/ class="f5 blue">Main Site →</a>
</nav></div></header><main class="bg-white bt bw05 b--light-gray sans-serif flex flex-row-l flex-column">
<div class="bg-white w-100 pa4-ns pa3">
<div class=f4>
<div class="flex items-center justify-between">
<h1 class=mv0>
Hubs
</h1><a class="nowrap pl2" target=_ href=https://github.com/nycmeshnet/docs/blob/master/content/networking/hubs.md>
<div class="ba b--light-gray br2 pa2 f6 fw5 black flex"><svg class="mr1 h1 db-ns dn" role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 .297c-6.63.0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577.0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93.0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176.0.0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22.0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22.0 1.606-.015 2.896-.015 3.286.0.315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg>
<span>Edit<span class="dn di-ns pre"> on GitHub</span></span>
</div></a>
</div><div class=f5>
<div class=f6>
<p>
Last updated
March 7, 2021 by David Albert
</p></div><p>Hubs provide connectivity for many nodes in a neighborhood. They come in three different sizes: small, medium, and large. These categories are not strict, and you will find many variants in the field. You can modify your hub to suit your needs and the needs of other mesh members in your area.</p><h2 id=small>Small</h2><p>The smallest possible hub is a standard node, an <a href=https://mackncheesiest.github.io/tucsonmesh-docs/hardware/mikrotikomnitik5ac/>OmniTik 5 POE ac</a>, with an added <a href=https://mackncheesiest.github.io/tucsonmesh-docs/hardware/litebeamac/>LiteBeam AC</a> connected to a sector antenna at another hub or supernode to give it a reliable upstream connection. The OmniTik can then serve nearby nodes that have OmniTiks or other compatible equipment using WDS.</p><p>For a more robust small hub that can serve more nodes, you can add one or more <a href=https://mackncheesiest.github.io/tucsonmesh-docs/hardware/liteap/>LiteAP AC sector antennas</a>. Each LiteAP has a 120° coverage area, so three will cover a full 360° around the building. A hub with three LiteAPs and a LiteBeam uses four of the OmniTik’s five ethernet ports. The fifth can serve your apartment.</p><p>There are many variants on a small hub. If part of your roof is blocked, you can use fewer sector antennas, which leaves more ports for connecting your neighbors to the mesh. You can make a point-to-point connection with your LiteBeam or with an <a href=https://mackncheesiest.github.io/tucsonmesh-docs/hardware/sxtsqg5acd/>SXTsq 5 ac</a> to get a higher bandwidth link to another hub. Adding an outdoor switch such as a <a href=https://store.ui.com/collections/operator-accessories/products/nanoswitch>NanoSwitch</a>, <a href=https://mackncheesiest.github.io/tucsonmesh-docs/hardware/epr6/>EdgePoint R6</a>, <a href=https://store.ui.com/collections/operator-edgemax-control-points/products/edgepoint-r8>EdgePoint R8</a>, <a href=https://mikrotik.com/product/netpower_lite_7r>netPower Lite 7R</a> or <a href=https://mackncheesiest.github.io/tucsonmesh-docs/hardware/mikrotiknetpower15fr/>netPower 15FR</a> will give you more ethernet ports to serve more apartments. If nobody in your building needs service, you can have three sectors and two point-to-points or three point-to-points and two sectors.</p><p>Small hubs can use the <a href="https://configgen.nycmesh.net/?device=Omnitik5AC&template=rooftop-ospf.rsc.tmpl">standard OmniTik config</a>. Medium and large hubs require custom configuration.</p><h2 id=medium>Medium</h2><p>A medium hub can support more than five radios and forward more traffic than a small hub, without requiring the building to provide indoor space for equipment. It consists of a weatherproof enclosure on the roof with AC power and a non-wireless router. The ethernet ports on the router are used for sector antennas and point-to-point links – which can be either Ubiquiti airMAX radios like the LiteBeam AC or higher capacity airFiber.</p><p>Medium hubs are somewhat rare. It’s difficult to find routers with enough Power over Ethernet ports to power all the antennas, and putting a large number of PoE injectors in a weatherproof enclosure can be impractical.</p><p>Medium hubs can support 7-8 antennas on a budget, ideally for less than $1,000. The <a href=https://mikrotik.com/product/rb1100ahx4>RB1100AHx4</a> is a router that can be used at medium hubs.</p><h2 id=large>Large</h2><p>A large hub is both more flexible and more expensive than a medium hub. It requires an indoor panel with AC power. The wired router is mounted on the panel indoors, and an outdoor PoE switch like the <a href=https://store.ui.com/collections/operator-edgemax-control-points/products/edgepoint-s16>EdgePoint S16</a> is mounted on the roof. The router and the switch are connected using either copper or fiber. Having a separate router and switch lets you use a router with fewer ports, which gives you a lot more options for which router to use.</p><p>Equipment at the panel uses AC power. The outdoor switch uses DC power brought up to the roof from a power supply like the <a href=https://store.ui.com/collections/operator-accessories/products/edgepower-54v-150w>EP-54V-150W</a>, which is mounted at the panel. The antennas are powered by the outdoor switch. Power usage can be in the hundreds of watts.</p><p>Routers used at large hubs include models from the Mikrotik CCR1009 series and CCR1036 series, as well as standard PC servers running Linux. Large hubs may have more than one router.</p><h2 id=supernode>Supernode</h2><p>A supernode is a BGP-capable large hub. It’s the interface between the mesh and the public internet.</p><p>Supernodes are located in data centers so that they can be connected to an internet exchange point or directly connected to other ISPs. These interconnections are mostly made with fiber. Supernodes exchange routes with ISPs using BGP. They perform NAT to translate addresses from the mesh’s private <code>10.0.0.0/8</code> network into public IP addresses, and inject a default route into the mesh so that nodes on the mesh know how to reach the internet.</p><h2 id=future>Future</h2><p>These types of hubs don’t exist yet. They may be built in the future as the mesh grows, and are documented for planning purposes.</p><h3 id=backbone-nodes>Backbone nodes</h3><p>A backbone node is a supernode, but with no radio on the roof. It is attached to other hubs with fiber.</p><p>The buildings with the most abundant, cheapest opportunities to interconnect with other ISPs are not always the tallest buildings with the best lines of sight to surrounding neighborhoods. Building a backbone node at a location with inexpensive interconnection can save money by converting expensive supernodes into large fiber-attached hubs.</p><h3 id=fiber-attached-hubs>Fiber-attached hubs</h3><p>A fiber-attached hub is a hub of any size connected by fiber to a supernode or backbone node.</p><p>Currently, hubs are connected to other hubs and supernodes using a combination of point-to-point and point-to-multipoint radio links. Radio is susceptible to signal loss caused by rain, snow, and interference from other nearby radio transmitters. The more radio links your data has to traverse before it reaches a wired connection, the higher the odds that you experience service loss.</p><p>Ideally, every hub would be a fiber-attached hub. This would mean that everyone with line of sight to a hub would only have one wireless hop that’s subject to interference and signal loss, substantially increasing reliability. To do this, the mesh would need to lease or get donations of dark fiber that run underground between each hub and a supernode or backbone node.</p></div></div></div></main></div></div></body></html>