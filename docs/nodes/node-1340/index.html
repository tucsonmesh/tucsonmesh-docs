<!doctype html><html>
<head>
<title>
Saratoga hub - Tucson Mesh Docs
</title><meta name=viewport content="width=device-width,initial-scale=1">
<link href=../../css/main.css rel=stylesheet>
<meta property="og:title" content="Saratoga hub - Tucson Mesh Docs">
<meta property="og:type" content="article">
<meta property="article:published_time" content="0001-01-01">
<meta property="og:description" content>
<meta property="og:url" content="/nodes/node-1340/">
<meta property="og:site_name" content="Tucson Mesh Docs">
<meta property="twitter:description" content>
<meta property="twitter:title" content="Saratoga hub - Tucson Mesh Docs">
</head><body class=sans-serif>
<div class="h-100 flex-ns">
<div id=sidebar class="relative ph4-l ph3 flex justify-end-ns br bg-near-white b--light-gray">
<div class="mw5 w-100 overflow-y-hidden flex flex-column">
<div class="nowrap flex items-center justify-start h3">
<a href=../../ title=Home class="f3-ns f4 fw7 black nowrap flex items-center">
<img src=../../img/logo.svg class="h2 mr2">
<span class=f4>NYC Mesh
<span class="ml1 blue f5 ttu">Docs</span></span>
</a>
</div><div role=button class="hideDropdown h3 w3 flex items-center justify-center" tabindex=0><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-x"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg>
</div><div role=button class="showDropdown bg-near-white h3 w3 flex items-center justify-center" tabindex=0><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"><line x1="3" y1="12" x2="21" y2="12"/><line x1="3" y1="6" x2="21" y2="6"/><line x1="3" y1="18" x2="21" y2="18"/></svg>
</div><div class="dn db-ns dropdown overflow-y-auto pbv4-ns mt4-ns">
<ul class="list ma0 ph0">
<li>
<div class="flex items-center pv2"><svg xmlns="http://www.w3.org/2000/svg" width="10" height="16" viewBox="0 0 8 16" fill="#ccc" class="red mr2"><path fill-rule="evenodd" d="M7.5 8l-5 5L1 11.5 4.75 8 1 4.5 2.5 3z"/></svg>
<a href=../../intro/ class="db black">Introduction</a>
</div></li><li>
<div class="flex items-center pv2"><svg xmlns="http://www.w3.org/2000/svg" width="10" height="16" viewBox="0 0 8 16" fill="#ccc" class="red mr2"><path fill-rule="evenodd" d="M7.5 8l-5 5L1 11.5 4.75 8 1 4.5 2.5 3z"/></svg>
<a href=../../hardware/ class="db black">Hardware</a>
</div></li><li>
<div class="flex items-center pv2"><svg xmlns="http://www.w3.org/2000/svg" width="10" height="16" viewBox="0 0 8 16" fill="#ccc" class="red mr2"><path fill-rule="evenodd" d="M7.5 8l-5 5L1 11.5 4.75 8 1 4.5 2.5 3z"/></svg>
<a href=../../firmware/ class="db black">Firmware</a>
</div></li><li>
<div class="flex items-center pv2"><svg xmlns="http://www.w3.org/2000/svg" width="10" height="16" viewBox="0 0 8 16" fill="#ccc" class="red mr2"><path fill-rule="evenodd" d="M7.5 8l-5 5L1 11.5 4.75 8 1 4.5 2.5 3z"/></svg>
<a href=../../diy/ class="db black">DIY & Troubleshooting</a>
</div></li><li>
<div class="flex items-center pv2"><svg xmlns="http://www.w3.org/2000/svg" width="10" height="16" viewBox="0 0 8 16" fill="#ccc" class="red mr2"><path fill-rule="evenodd" d="M7.5 8l-5 5L1 11.5 4.75 8 1 4.5 2.5 3z"/></svg>
<a href=../../glossary/ class="db black">Glossary</a>
</div></li><li>
<div class="flex items-center pv2"><svg xmlns="http://www.w3.org/2000/svg" width="10" height="16" viewBox="0 0 8 16" fill="#ccc" class="red mr2"><path fill-rule="evenodd" d="M7.5 8l-5 5L1 11.5 4.75 8 1 4.5 2.5 3z"/></svg>
<a href=../../installs/ class="db black">Installs</a>
</div></li><li>
<div class="flex items-center pv2"><svg xmlns="http://www.w3.org/2000/svg" width="10" height="16" viewBox="0 0 8 16" fill="#ccc" class="red mr2"><path fill-rule="evenodd" d="M7.5 8l-5 5L1 11.5 4.75 8 1 4.5 2.5 3z"/></svg>
<a href=../../networking/ class="db black">Networking</a>
</div></li><li>
<div class="flex items-center pv2"><svg xmlns="http://www.w3.org/2000/svg" width="10" height="16" viewBox="0 0 10 16" fill="#ccc" class="red mr2"><path fill-rule="evenodd" d="M5 11 0 6l1.5-1.5L5 8.25 8.5 4.5 10 6z"/></svg>
<a href=../../nodes/ class="db black">Nodes</a>
</div><ul class="ma0 pa0 ml3 pl2">
<a href=../../nodes/node-1340/ class="db mv3 ml0 gray blue fw5">
Saratoga hub
</a>
<a href=../../nodes/supernode1/ class="db mv3 ml0 gray">
Supernode 1
</a>
<a href=../../nodes/supernode2/ class="db mv3 ml0 gray">
Supernode 2
</a>
<a href=../../nodes/supernode3/ class="db mv3 ml0 gray">
Supernode 3
</a>
<a href=../../nodes/supernode4/ class="db mv3 ml0 gray">
Supernode 4
</a>
</ul></li><li>
<div class="flex items-center pv2"><svg xmlns="http://www.w3.org/2000/svg" width="10" height="16" viewBox="0 0 8 16" fill="#ccc" class="red mr2"><path fill-rule="evenodd" d="M7.5 8l-5 5L1 11.5 4.75 8 1 4.5 2.5 3z"/></svg>
<a href=../../organization/ class="db black">Organization</a>
</div></li><li>
<div class="flex items-center pv2"><svg xmlns="http://www.w3.org/2000/svg" width="10" height="16" viewBox="0 0 8 16" fill="#ccc" class="red mr2"><path fill-rule="evenodd" d="M7.5 8l-5 5L1 11.5 4.75 8 1 4.5 2.5 3z"/></svg>
<a href=../../security/ class="db black">Security</a>
</div></li><li>
<div class="flex items-center pv2"><svg xmlns="http://www.w3.org/2000/svg" width="10" height="16" viewBox="0 0 8 16" fill="#ccc" class="red mr2"><path fill-rule="evenodd" d="M7.5 8l-5 5L1 11.5 4.75 8 1 4.5 2.5 3z"/></svg>
<a href=../../services/ class="db black">Services</a>
</div></li><li>
<div class="flex items-center pv2"><svg xmlns="http://www.w3.org/2000/svg" width="10" height="16" viewBox="0 0 8 16" fill="#ccc" class="red mr2"><path fill-rule="evenodd" d="M7.5 8l-5 5L1 11.5 4.75 8 1 4.5 2.5 3z"/></svg>
<a href=../../software/ class="db black">Software</a>
</div></li></ul></div></div></div><div class="overflow-y-scroll-ns w-80-ns">
<header class="dn ph4 h3 flex-ns flex-row items-center justify-start-l justify-center sans-serif bg-white">
<div class="w-100-ns f4 measure-wide flex items-center justify-end">
<nav class="f5 flex flex-wrap justify-center">
<a href=https://nycmesh.net/ class="f5 blue">Main Site â†’</a>
</nav></div></header><main class="bg-white bt bw05 b--light-gray sans-serif flex flex-row-l flex-column">
<div class="bg-white w-100 pa4-ns pa3">
<div class=f4>
<div class="flex items-center justify-between">
<h1 class=mv0>
Saratoga hub
</h1><a class="nowrap pl2" target=_ href=https://github.com/nycmeshnet/docs/blob/master/content/nodes/node-1340.md>
<div class="ba b--light-gray br2 pa2 f6 fw5 black flex"><svg class="mr1 h1 db-ns dn" role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 .297c-6.63.0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577.0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93.0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176.0.0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22.0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22.0 1.606-.015 2.896-.015 3.286.0.315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg>
<span>Edit<span class="dn di-ns pre"> on GitHub</span></span>
</div></a>
</div><div class=f5>
<div class=f6>
<p>
Last updated
April 8, 2019 by Brian
</p></div><p>Saratoga hub (1340) is a hub node located at 33 Saratoga Avenue in Brooklyn New York. The installation provides mesh and internet connectivity for building residents as well as large areas of the Bedford Stuyvesant and Bushwick neighborhoods.</p><p><img src=../../img/nycmesh-1340-wide.jpg alt="Node 1340 wide shot"></p><h2 id=status>Status</h2><p><a href=https://stats.1340.nycmesh.net>https://stats.1340.nycmesh.net</a></p><h2 id=coverage>Coverage</h2><img title="Coverage area" src=../../img/nycmesh-1340-coverage.png>
<h2 id=photos>Photos</h2><img title="The view" src=../../img/nycmesh-1340-view.png class=w-40>
<img title="The Stations (and switch)" src=../../img/nycmesh-1340-wide-area-station.png class=w-40>
<img title="The prototype" src=../../img/nycmesh-1340-prototype.png class=w-40>
<img title="An access point" src=../../img/nycmesh-1340-wide-area-ap.png class=w-40>
<h2 id=hardware>Hardware</h2><table>
<thead>
<tr>
<th>Description</th><th>Model</th><th>Manufacturer</th><th style=text-align:right>Quantity</th></tr></thead><tbody>
<tr>
<td>Router</td><td>EdgePointR6</td><td>UBNT</td><td style=text-align:right>1</td></tr><tr>
<td>Switch</td><td>EdgePointR6</td><td>UBNT</td><td style=text-align:right>2</td></tr><tr>
<td>Indoor AP</td><td>UniFi Mesh</td><td>UBNT</td><td style=text-align:right>5</td></tr><tr>
<td>Powerline adapter</td><td>AV2000 (2-port Gigabit)</td><td>TP-LINK</td><td style=text-align:right>4</td></tr><tr>
<td>Outdoor AP</td><td>SXT</td><td>Mikrotik</td><td style=text-align:right>1</td></tr><tr>
<td>Outdoor AP</td><td>Nanostation M5</td><td>UBNT</td><td style=text-align:right>1</td></tr><tr>
<td>Wide area AP</td><td>LiteAP 120</td><td>UBNT</td><td style=text-align:right>4</td></tr><tr>
<td>Wide area station</td><td>Litebeam AC</td><td>UBNT</td><td style=text-align:right>2</td></tr><tr>
<td>Application server</td><td>Raspberry Pi</td><td>RPi Foundation</td><td style=text-align:right>1</td></tr></tbody></table><h2 id=schematic>Schematic</h2><img title=Schematic src=../../img/nycmesh-1340-schematic.jpg>
<h2 id=ethernet-over-power>Ethernet over power</h2><p>We needed to place wireless access points deep inside the building but did not have permission or budget to run new conduit. We tried at first to backhaul the APs using a wireless mesh approach, but found the concrete walls and floors to be too thick to get acceptable performance. Ethernet and DC power are commonly multiplexed (called PoE or power-over-ethernet), but it&rsquo;s also possible to multiplex ethernet and AC power. This was the technique we settled on as it utilized a pre-existing infrastructure and was able to deliver 100Mbps+ to each of our APs.</p><img title="Powerline adapter" src=../../img/nycmesh-1340-powerline.png>
<h2 id=ap-enclosures>AP enclosures</h2><p>The combination of an access point, PoE injector and EoP adapter resulted a somewhat awkward and exposed deployment - to protect them from damage and improve their appearance, our team designed custom 3d-printed enclosures:</p><img title="Access point deployment" src=../../img/nycmesh-1340-enclosure-0.jpg>
<img title=Fabrication src=../../img/nycmesh-1340-enclosure-1.jpg>
<img title="Finished product" src=../../img/nycmesh-1340-enclosure-2.jpg>
<h2 id=mounting>Mounting</h2><p>The mounting brackets shipping with the wide-area access points we deployed at the site are designed to clamp to poles. Unfortunately no appropriate structures predated our installation and given its potentially short term nature we devised a customized non-pentrating bracket using only readily available components from a local industrial electrical supplier.</p><img title="Custom mounting bracket" src=../../img/nycmesh-1340-mounting.png>
<h2 id=routing>Routing</h2><p>1340 currently uses BGP to exchange routes with its mesh peers. We hope to upgrade this node to support additional dynamic routing protocols soon.</p><h2 id=switching>Switching</h2><p>1340 enforces isolation at layer 2 on its public access networks for security reasons. The EP-R6 devices we had on hand have dedicated switching hardware (which is a nice thing) however no controls are exposed that provide a way to isolate ports in the traditional way. To achieve the desired effect we used VLANs to pass each wireless AP&rsquo;s access net though to a linux bridge on the router. This has the unfortunate side effect of causing the router to send multiple identical copies of its broadcast frames over our trunk links, but fortunately the volume of this sort of traffic is currently quite low.</p></div></div></div></main></div></div></body></html>