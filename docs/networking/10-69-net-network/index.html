<!doctype html><html>
<head>
<title>
10-69-net Network - Tucson Mesh Docs
</title><meta name=viewport content="width=device-width,initial-scale=1">
<link href=../../css/main.css rel=stylesheet>
<meta property="og:title" content="10-69-net Network - Tucson Mesh Docs">
<meta property="og:type" content="article">
<meta property="article:published_time" content="0001-01-01">
<meta property="og:description" content>
<meta property="og:url" content="/networking/10-69-net-network/">
<meta property="og:site_name" content="Tucson Mesh Docs">
<meta property="twitter:description" content>
<meta property="twitter:title" content="10-69-net Network - Tucson Mesh Docs">
</head><body class=sans-serif>
<div class="h-100 flex-ns">
<div id=sidebar class="relative ph4-l ph3 flex justify-end-ns br bg-near-white b--light-gray">
<div class="mw5 w-100 overflow-y-hidden flex flex-column">
<div class="nowrap flex items-center justify-start h3">
<a href=../../ title=Home class="f3-ns f4 fw7 black nowrap flex items-center">
<img src=../../img/logo.svg class="h2 mr2">
<span class=f4>NYC Mesh
<span class="ml1 blue f5 ttu">Docs</span></span>
</a>
</div><div role=button class="hideDropdown h3 w3 flex items-center justify-center" tabindex=0><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-x"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg>
</div><div role=button class="showDropdown bg-near-white h3 w3 flex items-center justify-center" tabindex=0><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"><line x1="3" y1="12" x2="21" y2="12"/><line x1="3" y1="6" x2="21" y2="6"/><line x1="3" y1="18" x2="21" y2="18"/></svg>
</div><div class="dn db-ns dropdown overflow-y-auto pbv4-ns mt4-ns">
<ul class="list ma0 ph0">
<li>
<div class="flex items-center pv2"><svg xmlns="http://www.w3.org/2000/svg" width="10" height="16" viewBox="0 0 8 16" fill="#ccc" class="red mr2"><path fill-rule="evenodd" d="M7.5 8l-5 5L1 11.5 4.75 8 1 4.5 2.5 3z"/></svg>
<a href=../../intro/ class="db black">Introduction</a>
</div></li><li>
<div class="flex items-center pv2"><svg xmlns="http://www.w3.org/2000/svg" width="10" height="16" viewBox="0 0 8 16" fill="#ccc" class="red mr2"><path fill-rule="evenodd" d="M7.5 8l-5 5L1 11.5 4.75 8 1 4.5 2.5 3z"/></svg>
<a href=../../hardware/ class="db black">Hardware</a>
</div></li><li>
<div class="flex items-center pv2"><svg xmlns="http://www.w3.org/2000/svg" width="10" height="16" viewBox="0 0 8 16" fill="#ccc" class="red mr2"><path fill-rule="evenodd" d="M7.5 8l-5 5L1 11.5 4.75 8 1 4.5 2.5 3z"/></svg>
<a href=../../firmware/ class="db black">Firmware</a>
</div></li><li>
<div class="flex items-center pv2"><svg xmlns="http://www.w3.org/2000/svg" width="10" height="16" viewBox="0 0 8 16" fill="#ccc" class="red mr2"><path fill-rule="evenodd" d="M7.5 8l-5 5L1 11.5 4.75 8 1 4.5 2.5 3z"/></svg>
<a href=../../diy/ class="db black">DIY & Troubleshooting</a>
</div></li><li>
<div class="flex items-center pv2"><svg xmlns="http://www.w3.org/2000/svg" width="10" height="16" viewBox="0 0 8 16" fill="#ccc" class="red mr2"><path fill-rule="evenodd" d="M7.5 8l-5 5L1 11.5 4.75 8 1 4.5 2.5 3z"/></svg>
<a href=../../glossary/ class="db black">Glossary</a>
</div></li><li>
<div class="flex items-center pv2"><svg xmlns="http://www.w3.org/2000/svg" width="10" height="16" viewBox="0 0 8 16" fill="#ccc" class="red mr2"><path fill-rule="evenodd" d="M7.5 8l-5 5L1 11.5 4.75 8 1 4.5 2.5 3z"/></svg>
<a href=../../installs/ class="db black">Installs</a>
</div></li><li>
<div class="flex items-center pv2"><svg xmlns="http://www.w3.org/2000/svg" width="10" height="16" viewBox="0 0 10 16" fill="#ccc" class="red mr2"><path fill-rule="evenodd" d="M5 11 0 6l1.5-1.5L5 8.25 8.5 4.5 10 6z"/></svg>
<a href=../../networking/ class="db black">Networking</a>
</div><ul class="ma0 pa0 ml3 pl2">
<a href=../../networking/10-69-net-network/ class="db mv3 ml0 gray blue fw5">
10-69-net Network
</a>
<a href=../../networking/bgp/ class="db mv3 ml0 gray">
BGP
</a>
<a href=../../networking/classes/ class="db mv3 ml0 gray">
Classes
</a>
<a href=../../networking/dns/ class="db mv3 ml0 gray">
DNS
</a>
<a href=../../networking/hubs/ class="db mv3 ml0 gray">
Hubs
</a>
<a href=../../networking/ipmappingidea/ class="db mv3 ml0 gray">
IP Mapping Idea
</a>
<a href=../../networking/mesh/ class="db mv3 ml0 gray">
Mesh Design
</a>
<a href=../../networking/ntp/ class="db mv3 ml0 gray">
NTP Network Time Protocol
</a>
<a href=../../networking/ospf/ class="db mv3 ml0 gray">
OSPF
</a>
<a href=../../networking/peering/ class="db mv3 ml0 gray">
Public ASN Peering
</a>
<a href=../../networking/supernode-architecture/ class="db mv3 ml0 gray">
Supernode Architecture
</a>
<a href=../../networking/vpn/ class="db mv3 ml0 gray">
VPN
</a>
<a href=../../networking/vpnl2tpipsec/ class="db mv3 ml0 gray">
VPN - L2TP/IPsec
</a>
<a href=../../networking/vpnl2tpipsecid/ class="db mv3 ml0 gray">
VPN - L2TP/IPsec Req.
</a>
<a href=../../networking/vpnwireguard/ class="db mv3 ml0 gray">
VPN - WireGuard
</a>
<a href=../../networking/vpnwireguardospf/ class="db mv3 ml0 gray">
VPN - WireGuard + OSPF
</a>
</ul></li><li>
<div class="flex items-center pv2"><svg xmlns="http://www.w3.org/2000/svg" width="10" height="16" viewBox="0 0 8 16" fill="#ccc" class="red mr2"><path fill-rule="evenodd" d="M7.5 8l-5 5L1 11.5 4.75 8 1 4.5 2.5 3z"/></svg>
<a href=../../nodes/ class="db black">Nodes</a>
</div></li><li>
<div class="flex items-center pv2"><svg xmlns="http://www.w3.org/2000/svg" width="10" height="16" viewBox="0 0 8 16" fill="#ccc" class="red mr2"><path fill-rule="evenodd" d="M7.5 8l-5 5L1 11.5 4.75 8 1 4.5 2.5 3z"/></svg>
<a href=../../organization/ class="db black">Organization</a>
</div></li><li>
<div class="flex items-center pv2"><svg xmlns="http://www.w3.org/2000/svg" width="10" height="16" viewBox="0 0 8 16" fill="#ccc" class="red mr2"><path fill-rule="evenodd" d="M7.5 8l-5 5L1 11.5 4.75 8 1 4.5 2.5 3z"/></svg>
<a href=../../security/ class="db black">Security</a>
</div></li><li>
<div class="flex items-center pv2"><svg xmlns="http://www.w3.org/2000/svg" width="10" height="16" viewBox="0 0 8 16" fill="#ccc" class="red mr2"><path fill-rule="evenodd" d="M7.5 8l-5 5L1 11.5 4.75 8 1 4.5 2.5 3z"/></svg>
<a href=../../services/ class="db black">Services</a>
</div></li><li>
<div class="flex items-center pv2"><svg xmlns="http://www.w3.org/2000/svg" width="10" height="16" viewBox="0 0 8 16" fill="#ccc" class="red mr2"><path fill-rule="evenodd" d="M7.5 8l-5 5L1 11.5 4.75 8 1 4.5 2.5 3z"/></svg>
<a href=../../software/ class="db black">Software</a>
</div></li></ul></div></div></div><div class="overflow-y-scroll-ns w-80-ns">
<header class="dn ph4 h3 flex-ns flex-row items-center justify-start-l justify-center sans-serif bg-white">
<div class="w-100-ns f4 measure-wide flex items-center justify-end">
<nav class="f5 flex flex-wrap justify-center">
<a href=https://nycmesh.net/ class="f5 blue">Main Site →</a>
</nav></div></header><main class="bg-white bt bw05 b--light-gray sans-serif flex flex-row-l flex-column">
<div class="bg-white w-100 pa4-ns pa3">
<div class=f4>
<div class="flex items-center justify-between">
<h1 class=mv0>
10-69-net Network
</h1><a class="nowrap pl2" target=_ href=https://github.com/nycmeshnet/docs/blob/master/content/networking/10-69-net-network.md>
<div class="ba b--light-gray br2 pa2 f6 fw5 black flex"><svg class="mr1 h1 db-ns dn" role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 .297c-6.63.0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577.0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93.0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176.0.0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22.0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22.0 1.606-.015 2.896-.015 3.286.0.315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg>
<span>Edit<span class="dn di-ns pre"> on GitHub</span></span>
</div></a>
</div><div class=f5>
<div class=f6>
<p>
Last updated
December 10, 2020 by David Albert
</p></div><p>The 10-69 network is used to connect nodes on NYC Mesh. Every mesh router at every node on the mesh gets an IP address from <code>10.69.0.0/16</code>. Each router&rsquo;s IP address can be computed from the router&rsquo;s node number. The 10-69 network supports up to two routers per node.</p><p>The 10-69 network allows for routers at nodes to auto-discover each other using <a href=../../networking/ospf/>OSPF</a> with minimal configuration. This makes it possible for anyone to join the mesh with almost no intervention from other mesh members. All you need to do is <a href=https://nycmesh.net/join>request a node number</a>. No IP addresses, subnets or VLANs have to be statically allocated, configuration can be <a href=https://configgen.nycmesh.net>auto-generated</a> from your node number, and nobody has to log in to any routers at neighboring nodes to update their configuration. As long as you have line of sight to another node and configure your router to use OSPF on the 10-69 network, you can join the mesh.</p><p>Each mesh router bridges its wired and wireless interfaces together into a single interface. The 10-69 network is link-local to this bridge. The bridge&rsquo;s IP address is the router&rsquo;s 10-69 address, and every router sees <code>10.69.0.0/16</code> as directly connected in its routing table. Because the 10-69 network is link-local, you will never see <code>10.69.0.0/16</code> in the OSPF routing table. Instead, you will see a <code>/32</code> (a route to a single host) for every router that&rsquo;s online.</p><p>All routers connected to the bridge are isolated from each other at layer 2. They can only talk to the router hosting the bridge. This is equivalent to a port-isolated switch with the host router on the uplink port. Without port isolation, the mesh would become a huge layer 2 broadcast domain: every router&rsquo;s bridge would be directly connected to every other router&rsquo;s bridge.</p><p>Port isolation also makes sure that the topology of the layer 2 network mirrors the physical layer&rsquo;s topology. A bridge without port isolation is a broadcast domain, but the mesh is primarily made up of point-to-point and point-to-multipoint radio links. If routers A and B connect wirelessly to router C&rsquo;s bridge, we want OSPF adjacencies for A-C and B-C, but not A-B. This is because routers A and B are not actually neighbors – all traffic between A and B has to flow through C.</p><p>All OSPF interfaces that use the 10-69 network are configured in point-to-multipoint mode. Like broadcast interfaces, PtMP interfaces can automatically discover their neighbors, so OSPF neighbors don&rsquo;t have to be set statically in the router&rsquo;s configuration. Unlike broadcast interfaces, <a href=https://tools.ietf.org/html/rfc2328>RFC 2328</a> does not specify how OSPF should perform auto-discovery on PtMP interfaces. The mesh assumes that auto-discovery will be performed using the AllSPFRouters multicast IP address (<code>224.0.0.5</code>), but not all OSPF implementations support this. For PtMP interfaces, OSPF advertises a <code>/32</code> to its address on that interface.</p><p>The ability to easily compute IP address from node number is also useful for troubleshooting: if you need to see if a node is reachable, convert its node number into its first router&rsquo;s 10-69 address and ping it.</p><p>In addition to the 10-69 network, a <code>/26</code> for users of your node can be computed from your node number. The <a href="https://configgen.nycmesh.net/?device=Omnitik5AC&template=rooftop-ospf.rsc.tmpl">standard OmniTik config</a> will hand these addresses out using DHCP. These addresses are computed linearly starting at <code>10.96.0.0/26</code> (followed by <code>10.96.0.64/26</code>, <code>10.96.0.128/26</code>, etc.).</p><h2 id=generating-an-ip-address>Generating an IP address</h2><p>The first router at each node can auto-generate its own 10-69 IP address using the following method:</p><p>The router&rsquo;s address will take the form of <code>10.69.X.Y</code>. Take the node number and split it after the second digit. For example, node number 12345 becomes 123 and 45. The digits on the left, in this case 123, are bound to <code>X</code>, and the digits on the right are bound to <code>Y</code>, giving us <code>10.69.123.45</code>.</p><p><code>Y</code> can be between one and two digits, so it can&rsquo;t be greater than 99. <code>X</code> can in theory be any number of digits, but each number in an IPv4 address can only range from 0 to 255, so <code>X</code> can&rsquo;t be greater than 255. This means that the highest node number possible in this addressing scheme is 25,599.</p><p>For example:</p><table>
<thead>
<tr>
<th>Node Number</th><th>X</th><th>Y</th><th>10-69-net Address</th></tr></thead><tbody>
<tr>
<td>5</td><td>0</td><td>5</td><td>10.69.0.5</td></tr><tr>
<td>50</td><td>0</td><td>50</td><td>10.69.0.50</td></tr><tr>
<td>500</td><td>5</td><td>00</td><td>10.69.5.0</td></tr><tr>
<td>5000</td><td>50</td><td>00</td><td>10.69.50.0</td></tr><tr>
<td>50000</td><td>X</td><td>Y</td><td>Not Possible</td></tr><tr>
<td>25599</td><td>255</td><td>99</td><td>10.69.255.99</td></tr></tbody></table><h2 id=adding-a-second-router>Adding a second router</h2><p>Most of the time, one router per node is enough, but sometimes it&rsquo;s useful to add a second router.</p><p>To generate an address for a second router, just add 100 to <code>Y</code>. Going back to the previous example, the address of the second router at node 12345 would be <code>10.69.123.145</code>.</p><p>For example:</p><table>
<thead>
<tr>
<th>Node Number</th><th>X</th><th>Y</th><th>First router</th><th>Second Router</th></tr></thead><tbody>
<tr>
<td>5</td><td>0</td><td>5</td><td>10.69.0.5</td><td>10.69.0.105</td></tr><tr>
<td>50</td><td>0</td><td>50</td><td>10.69.0.50</td><td>10.69.0.150</td></tr><tr>
<td>500</td><td>5</td><td>00</td><td>10.69.5.0</td><td>10.69.5.100</td></tr><tr>
<td>5000</td><td>50</td><td>00</td><td>10.69.50.0</td><td>10.69.50.100</td></tr><tr>
<td>50000</td><td>X</td><td>Y</td><td>Not Possible</td><td>Not Possible</td></tr><tr>
<td>25599</td><td>255</td><td>99</td><td>10.69.255.99</td><td>10.69.255.199</td></tr></tbody></table></div></div></div></main></div></div></body></html>