<!doctype html><html>
<head>
<title>
MikroTik OmniTik 5 POE ac - Tucson Mesh Docs
</title><meta name=viewport content="width=device-width,initial-scale=1">
<link href=../../css/main.css rel=stylesheet>
<meta property="og:title" content="MikroTik OmniTik 5 POE ac - Tucson Mesh Docs">
<meta property="og:type" content="article">
<meta property="article:published_time" content="0001-01-01">
<meta property="og:description" content>
<meta property="og:url" content="/hardware/mikrotikomnitik5ac/">
<meta property="og:site_name" content="Tucson Mesh Docs">
<meta property="twitter:description" content>
<meta property="twitter:title" content="MikroTik OmniTik 5 POE ac - Tucson Mesh Docs">
</head><body class=sans-serif>
<div class="h-100 flex-ns">
<div id=sidebar class="relative ph4-l ph3 flex justify-end-ns br bg-near-white b--light-gray">
<div class="mw5 w-100 overflow-y-hidden flex flex-column">
<div class="nowrap flex items-center justify-start h3">
<a href=../../ title=Home class="f3-ns f4 fw7 black nowrap flex items-center">
<img src=../../img/logo.svg class="h2 mr2">
<span class=f4>NYC Mesh
<span class="ml1 blue f5 ttu">Docs</span></span>
</a>
</div><div role=button class="hideDropdown h3 w3 flex items-center justify-center" tabindex=0><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-x"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg>
</div><div role=button class="showDropdown bg-near-white h3 w3 flex items-center justify-center" tabindex=0><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"><line x1="3" y1="12" x2="21" y2="12"/><line x1="3" y1="6" x2="21" y2="6"/><line x1="3" y1="18" x2="21" y2="18"/></svg>
</div><div class="dn db-ns dropdown overflow-y-auto pbv4-ns mt4-ns">
<ul class="list ma0 ph0">
<li>
<div class="flex items-center pv2"><svg xmlns="http://www.w3.org/2000/svg" width="10" height="16" viewBox="0 0 8 16" fill="#ccc" class="red mr2"><path fill-rule="evenodd" d="M7.5 8l-5 5L1 11.5 4.75 8 1 4.5 2.5 3z"/></svg>
<a href=../../intro/ class="db black">Introduction</a>
</div></li><li>
<div class="flex items-center pv2"><svg xmlns="http://www.w3.org/2000/svg" width="10" height="16" viewBox="0 0 10 16" fill="#ccc" class="red mr2"><path fill-rule="evenodd" d="M5 11 0 6l1.5-1.5L5 8.25 8.5 4.5 10 6z"/></svg>
<a href=../../hardware/ class="db black">Hardware</a>
</div><ul class="ma0 pa0 ml3 pl2">
<a href=../../hardware/config/ class="db mv3 ml0 gray">
Configs
</a>
<a href=../../hardware/60ghz/ class="db mv3 ml0 gray">
60 GHz
</a>
<a href=../../hardware/chromebook/ class="db mv3 ml0 gray">
Chromebook
</a>
<a href=../../hardware/ethernet/ class="db mv3 ml0 gray">
Ethernet
</a>
<a href=../../hardware/mikrotiknetpower15fr/ class="db mv3 ml0 gray">
MikroTik NetPower 15FR
</a>
<a href=../../hardware/mikrotikomnitik5ac/ class="db mv3 ml0 gray blue fw5">
MikroTik OmniTik 5 POE ac
</a>
<a href=../../hardware/mikrotikpowerboxpro/ class="db mv3 ml0 gray">
MikroTik PowerBox Pro
</a>
<a href=../../hardware/mikrotikspecifics/ class="db mv3 ml0 gray">
MikroTik Specifics
</a>
<a href=../../hardware/sxtsqg5acd/ class="db mv3 ml0 gray">
Mikrotik SXTsq G-5acD
</a>
<a href=../../hardware/newhardware/ class="db mv3 ml0 gray">
New Hardware
</a>
<a href=../../hardware/tplink/ class="db mv3 ml0 gray">
TP-Link Indoor Router
</a>
<a href=../../hardware/ltu/ class="db mv3 ml0 gray">
Try the new LTU sector
</a>
<a href=../../hardware/epr6/ class="db mv3 ml0 gray">
Ubiquiti EdgePoint R6
</a>
<a href=../../hardware/liteap/ class="db mv3 ml0 gray">
Ubiquiti LiteAP Sector
</a>
<a href=../../hardware/litebeamac/ class="db mv3 ml0 gray">
Ubiquiti LiteBeam AC
</a>
<a href=../../hardware/nsm5/ class="db mv3 ml0 gray">
Ubiquiti Nanostation M5
</a>
<a href=../../hardware/unifi-ap/ class="db mv3 ml0 gray">
Unifi Access Points
</a>
</ul></li><li>
<div class="flex items-center pv2"><svg xmlns="http://www.w3.org/2000/svg" width="10" height="16" viewBox="0 0 8 16" fill="#ccc" class="red mr2"><path fill-rule="evenodd" d="M7.5 8l-5 5L1 11.5 4.75 8 1 4.5 2.5 3z"/></svg>
<a href=../../firmware/ class="db black">Firmware</a>
</div></li><li>
<div class="flex items-center pv2"><svg xmlns="http://www.w3.org/2000/svg" width="10" height="16" viewBox="0 0 8 16" fill="#ccc" class="red mr2"><path fill-rule="evenodd" d="M7.5 8l-5 5L1 11.5 4.75 8 1 4.5 2.5 3z"/></svg>
<a href=../../diy/ class="db black">DIY & Troubleshooting</a>
</div></li><li>
<div class="flex items-center pv2"><svg xmlns="http://www.w3.org/2000/svg" width="10" height="16" viewBox="0 0 8 16" fill="#ccc" class="red mr2"><path fill-rule="evenodd" d="M7.5 8l-5 5L1 11.5 4.75 8 1 4.5 2.5 3z"/></svg>
<a href=../../glossary/ class="db black">Glossary</a>
</div></li><li>
<div class="flex items-center pv2"><svg xmlns="http://www.w3.org/2000/svg" width="10" height="16" viewBox="0 0 8 16" fill="#ccc" class="red mr2"><path fill-rule="evenodd" d="M7.5 8l-5 5L1 11.5 4.75 8 1 4.5 2.5 3z"/></svg>
<a href=../../installs/ class="db black">Installs</a>
</div></li><li>
<div class="flex items-center pv2"><svg xmlns="http://www.w3.org/2000/svg" width="10" height="16" viewBox="0 0 8 16" fill="#ccc" class="red mr2"><path fill-rule="evenodd" d="M7.5 8l-5 5L1 11.5 4.75 8 1 4.5 2.5 3z"/></svg>
<a href=../../networking/ class="db black">Networking</a>
</div></li><li>
<div class="flex items-center pv2"><svg xmlns="http://www.w3.org/2000/svg" width="10" height="16" viewBox="0 0 8 16" fill="#ccc" class="red mr2"><path fill-rule="evenodd" d="M7.5 8l-5 5L1 11.5 4.75 8 1 4.5 2.5 3z"/></svg>
<a href=../../nodes/ class="db black">Nodes</a>
</div></li><li>
<div class="flex items-center pv2"><svg xmlns="http://www.w3.org/2000/svg" width="10" height="16" viewBox="0 0 8 16" fill="#ccc" class="red mr2"><path fill-rule="evenodd" d="M7.5 8l-5 5L1 11.5 4.75 8 1 4.5 2.5 3z"/></svg>
<a href=../../organization/ class="db black">Organization</a>
</div></li><li>
<div class="flex items-center pv2"><svg xmlns="http://www.w3.org/2000/svg" width="10" height="16" viewBox="0 0 8 16" fill="#ccc" class="red mr2"><path fill-rule="evenodd" d="M7.5 8l-5 5L1 11.5 4.75 8 1 4.5 2.5 3z"/></svg>
<a href=../../security/ class="db black">Security</a>
</div></li><li>
<div class="flex items-center pv2"><svg xmlns="http://www.w3.org/2000/svg" width="10" height="16" viewBox="0 0 8 16" fill="#ccc" class="red mr2"><path fill-rule="evenodd" d="M7.5 8l-5 5L1 11.5 4.75 8 1 4.5 2.5 3z"/></svg>
<a href=../../services/ class="db black">Services</a>
</div></li><li>
<div class="flex items-center pv2"><svg xmlns="http://www.w3.org/2000/svg" width="10" height="16" viewBox="0 0 8 16" fill="#ccc" class="red mr2"><path fill-rule="evenodd" d="M7.5 8l-5 5L1 11.5 4.75 8 1 4.5 2.5 3z"/></svg>
<a href=../../software/ class="db black">Software</a>
</div></li></ul></div></div></div><div class="overflow-y-scroll-ns w-80-ns">
<header class="dn ph4 h3 flex-ns flex-row items-center justify-start-l justify-center sans-serif bg-white">
<div class="w-100-ns f4 measure-wide flex items-center justify-end">
<nav class="f5 flex flex-wrap justify-center">
<a href=https://nycmesh.net/ class="f5 blue">Main Site â†’</a>
</nav></div></header><main class="bg-white bt bw05 b--light-gray sans-serif flex flex-row-l flex-column">
<div class="bg-white w-100 pa4-ns pa3">
<div class=f4>
<div class="flex items-center justify-between">
<h1 class=mv0>
MikroTik OmniTik 5 POE ac
</h1><a class="nowrap pl2" target=_ href=https://github.com/nycmeshnet/docs/blob/master/content/hardware/mikrotikomnitik5ac.md>
<div class="ba b--light-gray br2 pa2 f6 fw5 black flex"><svg class="mr1 h1 db-ns dn" role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 .297c-6.63.0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577.0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93.0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176.0.0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22.0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22.0 1.606-.015 2.896-.015 3.286.0.315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg>
<span>Edit<span class="dn di-ns pre"> on GitHub</span></span>
</div></a>
</div><div class=f5>
<div class=f6>
<p>
Last updated
April 8, 2022 by Chris Morgan
</p></div><p>The Omnitik 5ac is an outdoor switch/router with a built-in 5Ghz 802.11ac access point, omnidirectional antenna, and 5 gigabit ethernet ports. Be sure to get the POE version. Here are <a href=../config/#omni>the config instructions</a></p><p>The OmniTik serves a few purposes for us. We can plug in other devices such as a LiteBeam, or run cables down to apartments. It acts as an AP for the rooftop, and also runs our config of WDS and OSPF so it will mesh with other OmniTiks or SXTsqs within a few blocks</p><p><em>Please be sure to see <a href=../../hardware/mikrotikspecifics>MikroTik Specifics</a> for extra info about Mikrotik devices, how to connect, etc.</em></p><p><img src=../../img/hardware/mikrotik_omnitik5poeac_front.jpg alt="MikroTik OmniTik PoE 5ac Front View"></p><p>The PoE version accepts 12-57V passive PoE on port 1 and can be configured to provide PoE out to ports 2-5.</p><p><img src=../../img/hardware/mikrotik_omnitik5poeac_ports.jpg alt="MikroTik OmniTik PoE 5ac Ports"></p><p>The small round plastic tabs, shown in the picture above, should be removed for those cable ports you will use - push them firmly inwards to remove. Leave the tabs in unused ports to prevent water entry.</p><p>Device specs are available at <a href=https://mikrotik.com/product/rbomnitikpg_5hacd>Mikrotik.com</a></p><h2 id=uses>Uses</h2><ul>
<li>Hub node routing or AP ( for standard 802.11ac hubs )</li><li>Rooftop installations for multi-tenant houses</li><li>Providing public access via the omnidirectional antenna</li></ul><h2 id=how-to-reset>How to reset</h2><ol>
<li>Press reset</li><li>Apply power</li><li>Watch the power led, once it blinks, STOP pressing the reset button</li><li>It will beep one time</li><li>Once you hear two beeps, you should be able to access it.</li></ol><h2 id=how-to-upgrade-the-firmware>How to upgrade the firmware</h2><ol>
<li>Upload the routeros-mipsbe-x.x.x.npk file in http://192.168.88.1/webfig/#Files</li><li>Select System Reboot</li></ol><h2 id=how-to-downgrade-firmware>How to downgrade firmware</h2><ol>
<li>Upload the routeros-mipsbe-x.x.x.npk file in http://192.168.88.1/webfig/#Files</li><li>Go to Terminal and type <code>/system package downgrade;</code></li></ol><h2 id=configurations>Configurations</h2><h3 id=omnitik-config>Omnitik config</h3><p>Here are <a href=../config/#omni>the current config instructions</a>. As discussed in the <a href=../../hardware/mikrotikspecifics>MikroTik Specifics</a> page, these devices need a script to be generated and loaded onto the device rather than a saved config file.<br>
We now have a script generator you can find here <a href="https://configgen.nycmesh.net/?device=Omnitik5AC&template=rooftop-ospf.rsc.tmpl">https://configgen.nycmesh.net/</a><br>
Here is a slideshow of <a href=https://docs.google.com/presentation/d/1V91gqeo19D-6bTG3Mtj7dhx7ERlzHOkplmf9-kAI3NU/present>configuring an OmniTik</a></p><details>
<summary>Expand for `OLD nycmesh-omnitik-v3.2.rsc` example</summary>
<p>The is our obsolete 3.2 template script which needs some variables filled in.<br>
This script <em>only</em> works on the OmniTik 5ac PoE model</p><p>Version 3.2 Changelog:</p><ul>
<li>Separation of Public vs Tenant subnet</li><li>Fixed BGP sync missed config parameter</li><li>Startup delay ( ref Mikrotik forums )</li><li>Tada sound effect</li><li>Better firewall rules</li></ul><pre tabindex=0><code>:global nodenumber 1111
:global bgpasn 61111
:global ipprefix &#34;10.70.111&#34;
:global iptenantsrange 10.70.111.5-10.70.111.119
:global iptenantsgw 10.70.111.1
:global ippublicrange 10.70.111.130-10.70.111.180
:global ippublicgw 10.70.111.129
:global dns 10.10.10.10,1.1.1.1

/delay 15

:for j from=1 to=4 step=1 do={
  :for i from=2000 to=50 step=-400 do={
    :beep frequency=$i length=11ms;
    :delay 11ms;
  }
  :for i from=800 to=2000 step=400 do={
    :beep frequency=$i length=11ms;
    :delay 11ms;
  }
}

:foreach x in=[/interface wireless find] do={ /interface wireless reset-configuration $x }

:for t from=1200 to=350 step=-50 do={
  :beep frequency=$t length=33ms;
  :delay 33ms;
}

:beep frequency=500 length=100ms

/ip address add address=192.168.88.1/24 interface=ether3 network=192.168.88.0

:beep frequency=600 length=100ms

/interface ethernet
set [ find default-name=ether5 ] poe-out=forced-on

:beep frequency=700 length=100ms

/interface wireless security-profiles
add authentication-types=wpa-psk,wpa2-psk management-protection=allowed mode=\
    dynamic-keys name=nycmeshnet supplicant-identity=nycmesh \
    wpa-pre-shared-key=nycmeshnet wpa2-pre-shared-key=nycmeshnet

:beep frequency=800 length=100ms

/interface wireless
set [ find default-name=wlan1 ] band=5ghz-a/n/ac channel-width=20/40/80mhz-Ceee disabled=no distance=indoors frequency=auto mode=ap-bridge security-profile=nycmeshnet ssid=(&#34;nycmesh-&#34; . $nodenumber . &#34;-omni&#34;)  wireless-protocol=802.11 wps-mode=disabled
add disabled=no master-interface=wlan1 name=wlan2 ssid=&#34;-NYC Mesh Community WiFi-&#34; wps-mode=disabled

:beep frequency=900 length=100ms

/interface bridge
add auto-mac=yes name=publicaccess
add auto-mac=yes name=tenants

:beep frequency=1000 length=100ms

/ip address
add address=($ipprefix . &#34;.1/25&#34;) interface=tenants network=($ipprefix . &#34;.0&#34;)
add address=($ipprefix . &#34;.129/26&#34;) interface=publicaccess network=($ipprefix . &#34;.128&#34;)

:beep frequency=1100 length=100ms

/interface bridge port
add bridge=tenants interface=ether1
add bridge=tenants interface=ether2
add bridge=tenants interface=ether3
add bridge=tenants interface=ether4
add bridge=tenants interface=wlan1
add bridge=publicaccess interface=wlan2

:beep frequency=1200 length=100ms

/ip pool
add name=tenants ranges=$iptenantsrange
add name=publicaccess ranges=$ippublicrange

:beep frequency=1300 length=100ms

/ip dhcp-server
add address-pool=tenants disabled=no interface=tenants name=tenantsdhcp
add address-pool=publicaccess disabled=no interface=publicaccess name=publicaccessdhcp

:beep frequency=1400 length=100ms

/routing bgp instance
set default as=$bgpasn disabled=no

:beep frequency=1500 length=100ms

/routing bgp network
add network=($ipprefix . &#34;.0/24&#34;) synchronize=no

:beep frequency=1600 length=100ms

/ip dhcp-server network
add address=($ipprefix . &#34;.0/25&#34;) dns-server=10.10.10.10 gateway=($ipprefix . &#34;.1&#34;) netmask=25
add address=($ipprefix . &#34;.128/26&#34;) dns-server=10.10.10.10 gateway=($ipprefix . &#34;.129&#34;) netmask=25

:beep frequency=1700 length=100ms

/ip firewall filter
add action=accept chain=input protocol=icmp
add action=drop chain=forward in-interface=publicaccess out-interface=tenants
add action=drop chain=input in-interface=publicaccess
add action=accept chain=forward
add action=accept chain=input

:beep frequency=1800 length=100ms

/system clock set time-zone-name=America/New_York
/system identity set name=(&#34;nycmesh-&#34; . $nodenumber . &#34;-omni&#34;)

:beep frequency=500 length=200ms;
:delay 500ms;
:beep frequency=500 length=200ms;
:delay 200ms;
:beep frequency=800 length=500ms;
:delay 50ms;
</code></pre><h3 id=how-to-apply-config>How to apply config:</h3><ol>
<li>Acquire config parameters ( BGP ASN, IP range, node number, etc. )</li><li>Fill in config file parameters at the top of the script.<br>
Save as <strong>nycmesh-omni-####.rsc</strong> where #### is your node number.<br>
The file must be named with <code>.rsc</code> at the end.</li></ol><ul>
<li>Factory Reset device if needed ( see <a href=../../hardware/mikrotikspecifics>MikroTik Specifics</a> for details )<br>
<em>( Connect to a port besides Port 1 )</em></li><li>Update firmware to latest on your device ( see <a href=../../software/mikrotikfirmware>Mikrotik Firmware</a> )</li><li>Upload the rsc file
<ul>
<li>The file needs to be in the <code>flash/</code> folder. However, there is no way to create a folder from the device.</li><li>Instead you need to upload the file using scp.</li><li>From a Mac or Linux desktop, upload the file using scp:<br>
<code>scp nycmesh-omni-####.rsc admin@192.168.88.1:flash/</code><br>
You may need to confirm the SSH key ( typical with SSH )</li><li>From a Windows desktop, you must have <a href=https://www.chiark.greenend.org.uk/~sgtatham/putty/latest.html>PuTTY</a> installed and run the following command from the command prompt:
<code>pscp -scp nycmesh-omni-####.rsc admin@192.168.88.1:flash/</code></li><li>You should see the file in the WebUI as <code>flash/nycmesh-omni-####.rsc</code></li></ul></li><li>Factory Reset the device with the option to restore this script.
<ul>
<li>From Web UI:
<ul>
<li>WebFig > System > Reset Configuration. Select:</li><li>No Defaults</li><li>Run After Reset: <code>flash/nycmesh-omni-####.rsc</code></li><li>Apply</li></ul></li><li>Or from CLI:
<ul>
<li><code>/system reset-configuration run-after-reset=flash/nycmesh-omni-####.rsc no-defaults=yes</code></li><li>Dangerous Reset anyway? Y</li></ul></li></ul></li></ul></details>
</div></div></div></main></div></div></body></html>